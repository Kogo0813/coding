setwd('D:\\OneDrive - knu.ac.kr\\2022-2학기\\GIS공간분석\\공간패널실습1/')
library(pscl)
library(MASS)
library(splm)
library(plm)
library(car)
timing <- proc.time()[3]
source("spfeml.r")
source("splaglm.r")
source("sperrorlm.r")
source("impacts.splm.r")
data0 <- read.csv("dataset/data.csv", fileEncoding = 'euc-kr')
data0 <- data0[,-1]
month <- substr(data0$관측일자자?,5,6)
month <- substr(data0$관측일자,5,6)
m.cos <- cos(2*pi*(as.numeric(month)+1)/12)
m.sin <- sin(2*pi*(as.numeric(month)+1)/12)
a <- read.table("whole.txt")
W <- as.matrix(a[1:25,1:25])  #1~25?????? ????
#dates <- data0[,1]
dates <- rep(seq(1:360),5)
regions <- data0[,3]
PM2.5 <- data0[,9]
NO2 <- data0[,4]
O3 <- data0[,5]
CO <- data0[,6]
SO2 <- data0[,7]
PM10 <- data0[,8]
mean.temp <- data0[,10]
mn.temp <- data0[,11]
mx.temp <- data0[,12]
mean.humid <- data0[,13]
mn.humid <- data0[,14]
mx.humid <- data0[,15]
mean.wdspeed <- data0[,16]
max.wdspeed <- data0[,17]
precips <- data0[,18]
wd.dir <- data0[,20]
new.data <- data.frame(regions,dates,PM2.5,NO2,O3,CO,SO2,PM10,mean.temp,mn.temp,mx.temp,mean.humid,mn.humid,mx.humid,mean.wdspeed,max.wdspeed,precips,wd.dir,m.cos,m.sin)
new.data <- data.frame(regions,dates,PM2.5,NO2,O3,CO,SO2,PM10,mean.temp,mn.temp,mx.temp,mean.humid,mn.humid,mx.humid,mean.wdspeed,max.wdspeed,precips,wd.dir,m.cos,m.sin)
install.packages("spdep")
rm(list=ls(all=TRUE))
setwd('D:\\OneDrive - knu.ac.kr\\2022-2학기\\GIS공간분석\\공간패널실습1/')
library(pscl)
library(MASS)
library(splm)
library(plm)
library(car)
library(spdep)
timing <- proc.time()[3]
source("spfeml.r")
source("splaglm.r")
source("sperrorlm.r")
source("impacts.splm.r")
data0 <- read.csv("dataset/data.csv", fileEncoding = "euc-kr")
data0 <- data0[,-1]
data0$ǳ��<- as.factor(data0$ǳ��)
data0$관측일시- as.factor(data0$관측일시)
data0$관측일시= as.factor(data0$관측일시)
month <- substr(data0$관측일시,5,6)
year <- substr(data0$관측일시,1,4)
m.cos <- cos(2*pi*(as.numeric(month)+1)/12)
m.sin <- sin(2*pi*(as.numeric(month)+1)/12)
a <- read.table("whole.txt")
W <- as.matrix(a[1:25,1:25])  #1~25������ ����
#dates <- data0[,1]
dates <- rep(seq(1:360),5)
regions <- data0[,3]
PM2.5 <- data0[,9]
NO2 <- data0[,4]
O3 <- data0[,5]
CO <- data0[,6]
SO2 <- data0[,7]
PM10 <- data0[,8]
mean.temp <- data0[,10]
mn.temp <- data0[,11]
mx.temp <- data0[,12]
mean.humid <- data0[,13]
mn.humid <- data0[,14]
mx.humid <- data0[,15]
mean.wdspeed <- data0[,16]
max.wdspeed <- data0[,17]
precips <- data0[,18]
wd.dir <- data0[,20]
new.data <- data.frame(regions,dates,PM2.5,NO2,O3,CO,SO2,PM10,mean.temp,mn.temp,mx.temp,mean.humid,mn.humid,mx.humid,mean.wdspeed,max.wdspeed,precips,wd.dir,m.cos,m.sin)
fm <- log(PM2.5) ~ NO2+O3+CO+SO2+PM10+mean.temp+mn.temp+mx.temp+mean.humid+mn.humid+mx.humid+mean.wdspeed+max.wdspeed+precips+wd.dir+m.cos+m.sin
fm <- log(PM2.5) ~ NO2+O3+SO2+mn.humid+mean.wdspeed+precips+wd.dir+m.cos+m.sin
new.data1 <- data.frame(split(new.data$PM2.5, new.data$region))
View(new.data1)
purtest(new.data1, pmax = 4, exo = "intercept", test = "madwu")
